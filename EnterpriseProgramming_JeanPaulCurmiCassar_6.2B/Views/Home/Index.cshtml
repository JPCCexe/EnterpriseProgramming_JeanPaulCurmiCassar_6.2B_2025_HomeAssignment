@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center mt-5">
    <h1 class="display-4">Welcome</h1>
    <h5 class="display-4">Restaurant Management</h5>
    <p class="lead mt-3">Welcome to the Enterprise Programming Assignment</p>

        <div class="mt-5">
            <a asp-controller="ItemsRestaurant" asp-action="ApprovedRestaurants"
               class="btn btn-primary btn-lg me-3">
                View Catalog
            </a>

            <a asp-controller="BulkImport" asp-action="BulkImport"
               class="btn btn-secondary btn-lg">
                Bulk Import
            </a>
        </div>
    @inject DataAccess.Context.RestaurantDbContext DbContext

    @{
        var userEmail = User.Identity?.Name?.ToLower();
        var canVerifyEmail = false;

        if (!string.IsNullOrEmpty(userEmail))
        {
            // Hardcoded admin check
            if (userEmail == "adminjeanpaul@mcast.com")
            {
                canVerifyEmail = true;
            }
            else
            {
                // Dynamic check
                canVerifyEmail = DbContext.Restaurants.Any(r => r.OwnerEmailAddress.ToLower() == userEmail);
            }
        }
    }
    
    @if (canVerifyEmail)
        {
            <div class="mt-4">
                <a asp-controller="ItemsRestaurant" asp-action="Verification"
                   class="btn btn-success btn-lg">
                    Go to Verification
                </a>
            </div>
        }

    <br />
    <br />
    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div>
